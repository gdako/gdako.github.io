<!DOCTYPE html>
<html>
<head>
    <title>Stock Tracker</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: auto; }
        .stock-card { border: 1px solid #ddd; padding: 10px; margin: 10px 0; }
        .positive { color: green; }
        .negative { color: red; }
    </style>
</head>
<body>
    <input type="text" id="symbolInput" placeholder="Enter stock symbol">
    <button onclick="addStock()">Add Stock</button>
    <div id="stockContainer"></div>

    <script>
        const stocks = new Set();
        const API_KEY = 'cokrjr1r01qvovniq3q0cokrjr1r01qvovniq3qg'; // Free Finnhub API key

        async function fetchStockData(symbol) {
            try {
                const response = await fetch(`https://finnhub.io/api/v1/quote?symbol=${symbol}&token=${API_KEY}`);
                const data = await response.json();
                return data;
            } catch (error) {
                console.error('Error:', error);
                return null;
            }
        }

        function createStockCard(symbol, data) {
            if (!data || data.c === 0) return `<div class="stock-card">${symbol}: Error loading data</div>`;
            
            const changeClass = data.d >= 0 ? 'positive' : 'negative';
            
            return `
                <div class="stock-card">
                    <strong>${symbol}</strong>: 
                    $${data.c.toFixed(2)} 
                    <span class="${changeClass}">
                        (${data.d >= 0 ? '+' : ''}${data.d.toFixed(2)} | 
                        ${data.dp >= 0 ? '+' : ''}${data.dp.toFixed(2)}%)
                    </span>
                </div>
            `;
        }

        async function updateStocks() {
            const container = document.getElementById('stockContainer');
            container.innerHTML = '';
            for (const symbol of stocks) {
                const data = await fetchStockData(symbol);
                container.innerHTML += createStockCard(symbol, data);
            }
        }

        function addStock() {
            const symbol = document.getElementById('symbolInput').value.toUpperCase();
            if (symbol && !stocks.has(symbol)) {
                stocks.add(symbol);
                updateStocks();
                document.getElementById('symbolInput').value = '';
            }
        }

        // Initial update
        updateStocks();
        // Update every minute
        setInterval(updateStocks, 60000);
    </script>
</body>
</html>
